trigger:
  branches:
    include:
      - main

pool:
  vmImage: ubuntu-latest

steps:
- script: |
    echo 'FROM python:3.9-slim' >> Dockerfile
    echo 'COPY . /app' >> Dockerfile
    echo 'WORKDIR /app' >> Dockerfile
    echo 'RUN python sidePrint.py' >> Dockerfile
  displayName: 'Create Docker File'

- script: docker build -t multitabledary .
  displayName: 'Build Docker Image'

- task: Docker@2
  displayName: 'Login to Docker Hub'
  inputs:
    command: 'login'
    containerRegistry: 'docker-registry'
    username: '$(dockerhub_username)'
    password: '$(dockerhub_password)'

- script: docker tag multitabledary winterzone2/multiplicationtable:v2
  displayName: 'Tag Docker Image'

- script: docker push winterzone2/multiplicationtable:v2
  displayName: 'Push Docker Image'